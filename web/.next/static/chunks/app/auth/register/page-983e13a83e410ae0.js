(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8454],{3985:function(e,t,a){Promise.resolve().then(a.bind(a,8965))},8965:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var s=a(7821),r=a(8078),n=a(8504),l=a(4542),i=a(746),o=a(4089),c=a(1736),d=a(5805),m=a(432),x=a(4275),h=a(6744),u=a(2531),p=a(5813),g=a(9198),f=a(4811),y=a(8575),b=a(8219),j=a(6352),w=a(6028),N=a(6381),v=a(3960),k=a(1569),Z=a(7432),S=a(9557);let P="sangman_users_db";function A(){try{let e=localStorage.getItem(P);return e?JSON.parse(e):[]}catch(e){return[]}}let C=c.Ry({name:c.Z_().min(2,"Name must be at least 2 characters"),email:c.Z_().email("Please enter a valid email"),phone:c.Z_().optional()});function O(){var e,t;let a=(0,n.useRouter)(),c=(0,n.useSearchParams)().get("role")||"patient",{login:O}=(0,j.t)(),[_,E]=(0,r.useState)("+91"),[I,R]=(0,r.useState)(""),[B,T]=(0,r.useState)(),[D,F]=(0,r.useState)("phone"),[G,Y]=(0,r.useState)(!1),[H,J]=(0,r.useState)(null),[V,M]=(0,r.useState)(),[q,z]=(0,r.useState)(),{register:W,handleSubmit:L,setValue:K,watch:Q,formState:{errors:U,isSubmitting:X}}=(0,i.cI)({resolver:(0,o.F)(C)}),$=Q("email"),ee=async e=>{let t=(0,Z.f0)(I,_),s="phone"===D?t:e.email,r=(0,S.Dn)(s,"otp");if(!r.allowed){M(r.message),w.ZP.error(r.message||"Too many attempts");return}if(z(r.remainingAttempts),"phone"===D){let e=(0,Z.BO)(I,_);if(!e.valid){T(e.error),w.ZP.error(e.error||"Invalid phone number");return}}if(A().find(e=>"phone"===D?e.phone===s:e.email===s)){w.ZP.error("An account with this ".concat(D," already exists. Please login instead.")),a.push("/auth/login?role=".concat(c));return}(0,S.Bw)({identifier:s,type:D,success:!1,method:"otp"}),J({...e,name:(0,S.N1)(e.name),email:(0,S.H3)(e.email)}),Y(!0)},et="doctor"===c?{icon:d.Z,title:"Join as Doctor",subtitle:"Start accepting appointments today",gradient:"from-emerald-500 to-teal-600",bgGradient:"from-emerald-50 to-teal-50",accentColor:"emerald"}:{icon:m.Z,title:"Create Account",subtitle:"Your health journey starts here",gradient:"from-sky-500 to-cyan-600",bgGradient:"from-sky-50 to-cyan-50",accentColor:"sky"},ea=et.icon;return(0,s.jsxs)("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,s.jsxs)("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br ".concat(et.gradient," p-12 flex-col justify-between relative overflow-hidden"),children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)(l.default,{href:"/",className:"flex items-center gap-3 mb-12",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:(0,s.jsx)(m.Z,{className:"w-7 h-7 text-white heartbeat",fill:"white"})}),(0,s.jsx)("span",{className:"text-3xl font-bold text-white",children:"SANGMAN"})]}),(0,s.jsx)("h1",{className:"text-4xl lg:text-5xl font-bold text-white mb-6 leading-tight",children:"doctor"===c?"Grow Your Practice":"Healthcare at Your Fingertips"}),(0,s.jsx)("p",{className:"text-xl text-white/80 leading-relaxed max-w-md",children:"doctor"===c?"Join our network of verified doctors and connect with patients across the region.":"Access quality healthcare anytime, anywhere. Book appointments with verified doctors."})]}),(0,s.jsxs)("div",{className:"relative z-10 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-white/90",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"w-5 h-5"})}),(0,s.jsx)("span",{children:"OTP-Verified Registration"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-white/90",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"w-5 h-5"})}),(0,s.jsx)("span",{children:"Secure & Private"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-white/90",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,s.jsx)(u.Z,{className:"w-5 h-5"})}),(0,s.jsx)("span",{children:"No Passwords Required"})]})]})]}),(0,s.jsx)("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 lg:p-12",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"lg:hidden flex items-center justify-center gap-2 mb-8",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br ".concat(et.gradient," rounded-xl flex items-center justify-center"),children:(0,s.jsx)(m.Z,{className:"w-6 h-6 text-white heartbeat",fill:"white"})}),(0,s.jsx)("span",{className:"text-2xl font-bold bg-gradient-to-r ".concat(et.gradient," bg-clip-text text-transparent"),children:"SANGMAN"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl shadow-gray-200/50 p-8 lg:p-10",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,s.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br ".concat(et.gradient," rounded-2xl flex items-center justify-center shadow-lg"),children:(0,s.jsx)(ea,{className:"w-7 h-7 text-white"})})}),(0,s.jsx)("h1",{className:"text-center text-2xl font-bold text-gray-900 mb-1",children:et.title}),(0,s.jsx)("p",{className:"text-center text-gray-500 mb-6",children:et.subtitle}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6 py-2 px-4 bg-green-50 rounded-lg",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-green-700 font-medium",children:"Secure OTP Registration"})]}),V&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-red-700",children:"Too Many Attempts"}),(0,s.jsx)("p",{className:"text-sm text-red-600",children:V})]})]}),(0,s.jsxs)("form",{onSubmit:L(ee),className:"space-y-5",children:[(0,s.jsx)(N.Z,{label:"Full Name",type:"text",icon:g.Z,placeholder:"Enter your full name",error:null===(e=U.name)||void 0===e?void 0:e.message,...W("name")}),(0,s.jsx)(N.Z,{label:"Email Address",type:"email",icon:f.Z,placeholder:"Enter your email",error:null===(t=U.email)||void 0===t?void 0:t.message,...W("email")}),(0,s.jsx)(v.Z,{label:"Phone Number",countryCode:_,onCountryCodeChange:e=>{E(e),I.length>0&&T((0,Z.BO)(I,e).error)},onPhoneChange:e=>{R(e),K("phone",e),M(void 0),e.length>0?T((0,Z.BO)(e,_).error):T(void 0)},value:I,error:B}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Verify via"}),(0,s.jsxs)("div",{className:"flex gap-2 p-1.5 bg-gray-100 rounded-xl",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>F("phone"),className:"flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2 ".concat("phone"===D?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,s.jsx)(y.Z,{className:"w-4 h-4"}),"Phone OTP"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>F("email"),className:"flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2 ".concat("email"===D?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,s.jsx)(f.Z,{className:"w-4 h-4"}),"Email OTP"]})]})]}),void 0!==q&&q<3&&(0,s.jsxs)("p",{className:"text-sm text-amber-600 flex items-center gap-1",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),q," attempt",1!==q?"s":""," remaining"]}),(0,s.jsx)("button",{type:"submit",disabled:X||!!V,className:"w-full rounded-xl bg-gradient-to-r ".concat(et.gradient," py-3.5 text-sm font-semibold text-white hover:opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg"),children:X?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,s.jsx)("span",{children:"Creating Account..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Continue & Verify OTP"}),(0,s.jsx)(b.Z,{className:"w-4 h-4"})]})}),(0,s.jsxs)("p",{className:"text-xs text-center text-gray-500",children:["We'll send a 6-digit code to your ","phone"===D?"phone":"email"," to verify your account."]})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Already have an account?"," ",(0,s.jsx)(l.default,{href:"/auth/login?role=".concat(c),className:"text-sky-600 hover:text-sky-700 font-semibold",children:"Sign in"})]})}),(0,s.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-100",children:[(0,s.jsx)("p",{className:"text-sm text-center text-gray-500 mb-3",children:"Register as:"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(l.default,{href:"/auth/register?role=patient",className:"flex-1 py-3 px-4 rounded-xl text-sm font-semibold transition-all flex items-center justify-center gap-2 ".concat("patient"===c?"bg-gradient-to-r from-sky-500 to-cyan-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),"Patient"]}),(0,s.jsxs)(l.default,{href:"/auth/register?role=doctor",className:"flex-1 py-3 px-4 rounded-xl text-sm font-semibold transition-all flex items-center justify-center gap-2 ".concat("doctor"===c?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,s.jsx)(d.Z,{className:"w-4 h-4"}),"Doctor"]})]})]})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)(l.default,{href:"/",className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"â† Back to Home"})})]})}),(0,s.jsx)(k.Z,{isOpen:G,onClose:()=>Y(!1),onSuccess:()=>{if(H)try{let e=(0,Z.f0)(I,_),t="phone"===D?e:H.email;(0,S.sp)(t,"otp");let s=function(e){let t=A(),a={id:"user_"+(0,S.tk)().substring(0,16),phone:e.phone,email:e.email,name:e.name,role:e.role,verified:!0,createdAt:new Date().toISOString()};return t.push(a),localStorage.setItem(P,JSON.stringify(t)),a}({phone:e,email:H.email,name:H.name,role:c});(0,S.EY)({identifier:"phone"===D?(0,S.yD)(e):(0,S.of)(H.email),type:D,fullValue:t,countryCode:"phone"===D?_:void 0,userName:s.name}),(0,S.Bw)({identifier:t,type:D,success:!0,method:"otp"}),O({id:s.id,email:s.email||"",phone:s.phone||"",role:s.role,name:s.name,createdAt:s.createdAt,updatedAt:new Date().toISOString()},"token_"+(0,S.tk)()),w.ZP.success("Welcome, ".concat(s.name,"! Your account has been created.")),"doctor"===c?a.push("/doctor/verification"):a.push("/patient")}catch(e){w.ZP.error("Registration failed. Please try again.")}},phone:"phone"===D?(0,Z.f0)(I,_):void 0,email:"email"===D?$:void 0,channel:"phone"===D?"sms":"email",purpose:"register"})]})}function _(){return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 to-cyan-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-cyan-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(m.Z,{className:"w-8 h-8 text-white heartbeat"})}),(0,s.jsx)("p",{className:"text-gray-500",children:"Loading..."})]})})}function E(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(_,{}),children:(0,s.jsx)(O,{})})}},6381:function(e,t,a){"use strict";var s=a(7821),r=a(8078),n=a(534),l=a(2348);let i=(0,r.forwardRef)((e,t)=>{let{label:a,type:i="text",icon:o,error:c,className:d="",...m}=e,[x,h]=(0,r.useState)(!1),u="password"===i;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{...m,ref:t,type:u?x?"text":"password":i,placeholder:" ",className:"peer w-full rounded-lg border bg-white dark:bg-neutral-800 py-3 text-sm\n            text-neutral-900 dark:text-neutral-100\n            ".concat(o?"pl-12":"pl-4","\n            ").concat(u?"pr-12":"pr-4","\n            focus:outline-none focus:ring-2 transition-all\n            ").concat(c?"border-red-500 focus:ring-red-400 dark:border-red-600":"border-gray-300 dark:border-neutral-600 focus:ring-primary-500 focus:border-transparent","\n            ").concat(d)}),o&&(0,s.jsx)(o,{className:"pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400   transition-opacity duration-200 peer-focus:opacity-0 peer-[:not(:placeholder-shown)]:opacity-0"}),(0,s.jsx)("label",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 text-gray-500 dark:text-neutral-400\n            transition-all duration-200 origin-left bg-white dark:bg-neutral-800 px-1\n            ".concat(o?"left-11":"left-3","\n            peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm\n            peer-focus:top-0 peer-focus:text-xs peer-focus:text-primary-600 peer-focus:left-3 dark:peer-focus:text-primary-400\n            peer-[:not(:placeholder-shown)]:top-0 peer-[:not(:placeholder-shown)]:text-xs peer-[:not(:placeholder-shown)]:left-3\n            peer-[:not(:placeholder-shown)]:text-neutral-600 dark:peer-[:not(:placeholder-shown)]:text-neutral-300"),children:a}),u&&(0,s.jsx)("button",{type:"button",onClick:()=>h(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600    dark:hover:text-neutral-300 transition-colors",tabIndex:-1,"aria-label":x?"Hide password":"Show password",children:x?(0,s.jsx)(n.Z,{className:"w-5 h-5"}):(0,s.jsx)(l.Z,{className:"w-5 h-5"})})]}),c&&(0,s.jsx)("p",{className:"mt-1.5 text-xs text-red-500",children:c})]})});i.displayName="AuthInput",t.Z=i}},function(e){e.O(0,[9463,6028,9485,7949,4500,1494,8874,7115,2364,1744],function(){return e(e.s=3985)}),_N_E=e.O()}]);