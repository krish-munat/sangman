(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1608],{3939:function(e,t,r){Promise.resolve().then(r.bind(r,5274))},2828:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3778:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2531:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1996:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2133:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},8146:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8575:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},3116:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8504:function(e,t,r){"use strict";var a=r(3226);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},4102:function(e,t,r){"use strict";r.d(t,{ak:function(){return a},fr:function(){return n}});let a={COMMISSION_RATE:.07,SUBSCRIPTION_DISCOUNT:.1,DEFAULT_EMERGENCY_MULTIPLIER:1.5,NIGHT_HOURS:{start:22,end:6},PEAK_HOURS:{start:18,end:22}},n=["General Medicine","Cardiology","Dermatology","Orthopedics","Pediatrics","Gynecology","Neurology","Psychiatry","Ophthalmology","ENT","Dentistry","Oncology","Urology","Gastroenterology","Endocrinology"]},5274:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var a=r(7821),n=r(8078),s=r(8504),l=r(8146),i=r(2828),o=r(3778),d=r(1996),c=r(2133),u=r(2531),m=r(6352),x=r(652),p=r(8608),h=r(3784),b=r(4931),g=r(3116),y=r(8575),f=r(8322);let j=(0,f.Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),k=(0,f.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var N=r(6028);let v="9179970366@upi";function w(e){let{isOpen:t,onClose:r,onSuccess:s,amount:i,doctorName:o,appointmentDate:d,appointmentTime:m}=e,[x,p]=(0,n.useState)("upi"),[b,f]=(0,n.useState)(!1),[w,S]=(0,n.useState)("select"),[P,D]=(0,n.useState)(""),[C,M]=(0,n.useState)(""),[A,I]=(0,n.useState)(""),[Z,E]=(0,n.useState)(""),[O,T]=(0,n.useState)(""),[U,R]=(0,n.useState)(""),H=e=>{let t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),r=t&&t[0]||"",a=[];for(let e=0,t=r.length;e<t;e+=4)a.push(r.substring(e,e+4));return a.length?a.join(" "):e},F=e=>{let t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return t.length>=2?t.substring(0,2)+"/"+t.substring(2,4):t},G=async()=>{f(!0),S("process"),await new Promise(e=>setTimeout(e,2e3)),D("TXN"+Date.now()+Math.random().toString(36).substr(2,6).toUpperCase()),S("success"),f(!1)};return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),(0,a.jsxs)("div",{className:"relative bg-white dark:bg-neutral-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200 dark:border-neutral-700",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"success"===w?"Payment Successful!":"Complete Payment"}),(0,a.jsx)("button",{onClick:r,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg transition-colors",children:(0,a.jsx)(g.Z,{className:"w-5 h-5 text-neutral-500"})})]}),"select"===w&&(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-neutral-50 dark:bg-neutral-900 p-4 rounded-xl",children:[(0,a.jsx)("h3",{className:"font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:"Appointment Summary"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-neutral-600 dark:text-neutral-400",children:[(0,a.jsxs)("p",{children:["Doctor: ",o]}),(0,a.jsxs)("p",{children:["Date: ",d]}),(0,a.jsxs)("p",{children:["Time: ",m]})]}),(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-neutral-200 dark:border-neutral-700",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"Total Amount"}),(0,a.jsx)("span",{className:"text-xl font-bold text-primary-500",children:(0,h.xG)(i)})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-neutral-900 dark:text-neutral-100 mb-3",children:"Select Payment Method"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>p("upi"),className:"w-full flex items-center gap-3 p-4 rounded-xl border-2 transition-all ".concat("upi"===x?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-neutral-200 dark:border-neutral-700 hover:border-neutral-300"),children:[(0,a.jsx)(y.Z,{className:"w-6 h-6 ".concat("upi"===x?"text-primary-500":"text-neutral-400")}),(0,a.jsxs)("div",{className:"text-left flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"UPI Payment"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Pay using any UPI app"})]})]}),(0,a.jsxs)("button",{onClick:()=>p("card"),className:"w-full flex items-center gap-3 p-4 rounded-xl border-2 transition-all ".concat("card"===x?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-neutral-200 dark:border-neutral-700 hover:border-neutral-300"),children:[(0,a.jsx)(c.Z,{className:"w-6 h-6 ".concat("card"===x?"text-primary-500":"text-neutral-400")}),(0,a.jsxs)("div",{className:"text-left flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"Credit/Debit Card"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Visa, Mastercard, RuPay"})]})]}),(0,a.jsxs)("button",{onClick:()=>p("wallet"),className:"w-full flex items-center gap-3 p-4 rounded-xl border-2 transition-all ".concat("wallet"===x?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-neutral-200 dark:border-neutral-700 hover:border-neutral-300"),children:[(0,a.jsx)(j,{className:"w-6 h-6 ".concat("wallet"===x?"text-primary-500":"text-neutral-400")}),(0,a.jsxs)("div",{className:"text-left flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"Wallet"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Paytm, PhonePe, Amazon Pay"})]})]})]})]}),"upi"===x&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-xl",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-800 dark:text-green-300 mb-2",children:"Pay to Merchant UPI ID:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"flex-1 bg-white dark:bg-neutral-800 px-3 py-2 rounded-lg font-mono text-sm",children:v}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(v),N.ZP.success("UPI ID copied!")},className:"p-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:(0,a.jsx)(k,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Your UPI ID (for verification)"}),(0,a.jsx)("input",{type:"text",value:U,onChange:e=>R(e.target.value),placeholder:"yourname@upi",className:"w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600    bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100   focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),"card"===x&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Card Number"}),(0,a.jsx)("input",{type:"text",value:C,onChange:e=>M(H(e.target.value)),placeholder:"1234 5678 9012 3456",maxLength:19,className:"w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600    bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100   focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Expiry Date"}),(0,a.jsx)("input",{type:"text",value:A,onChange:e=>I(F(e.target.value)),placeholder:"MM/YY",maxLength:5,className:"w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600    bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100   focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"CVV"}),(0,a.jsx)("input",{type:"password",value:Z,onChange:e=>E(e.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"123",maxLength:4,className:"w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600    bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100   focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Cardholder Name"}),(0,a.jsx)("input",{type:"text",value:O,onChange:e=>T(e.target.value),placeholder:"John Doe",className:"w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600    bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100   focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),"wallet"===x&&(0,a.jsx)("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-xl",children:(0,a.jsxs)("p",{className:"text-sm text-amber-800 dark:text-amber-300",children:["You will be redirected to your preferred wallet app to complete the payment of ",(0,h.xG)(i),"."]})}),(0,a.jsxs)("button",{onClick:()=>{if("card"===x){if(C.replace(/\s/g,"").length<16){N.ZP.error("Please enter a valid card number");return}if(A.length<5){N.ZP.error("Please enter a valid expiry date");return}if(Z.length<3){N.ZP.error("Please enter a valid CVV");return}if(O.length<2){N.ZP.error("Please enter cardholder name");return}}else if("upi"===x&&U.length<5){N.ZP.error("Please enter a valid UPI ID");return}G()},className:"w-full bg-primary-500 text-white py-4 rounded-xl font-semibold    hover:bg-primary-600 transition-colors flex items-center justify-center gap-2",children:["Pay ",(0,h.xG)(i)]}),(0,a.jsx)("p",{className:"text-center text-xs text-neutral-500 dark:text-neutral-400",children:"\uD83D\uDD12 This is a demo payment. No actual transaction will occur."})]}),"process"===w&&(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(l.Z,{className:"w-16 h-16 text-primary-500 animate-spin mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:"Processing Payment"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Please wait while we process your payment..."})]}),"success"===w&&(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(u.Z,{className:"w-12 h-12 text-green-500"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100 mb-2",children:"Payment Successful!"}),(0,a.jsxs)("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:["Your payment of ",(0,h.xG)(i)," has been received."]}),(0,a.jsxs)("div",{className:"bg-neutral-50 dark:bg-neutral-900 p-4 rounded-xl mb-6",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-1",children:"Transaction ID"}),(0,a.jsx)("p",{className:"font-mono font-semibold text-neutral-900 dark:text-neutral-100",children:P})]}),(0,a.jsx)("button",{onClick:()=>{s(P,x)},className:"w-full bg-primary-500 text-white py-4 rounded-xl font-semibold    hover:bg-primary-600 transition-colors",children:"Continue"})]})]})]}):null}function S(){var e,t;let r=(0,s.useRouter)(),g=(0,s.useSearchParams)().get("doctorId"),{user:y}=(0,m.t)(),{addAppointment:f}=(0,x.O)(),[j,k]=(0,n.useState)(null),[v,S]=(0,n.useState)(""),[P,D]=(0,n.useState)(null),[C,M]=(0,n.useState)(!1),[A,I]=(0,n.useState)(null),[Z,E]=(0,n.useState)("date"),[O,T]=(0,n.useState)(!1),[U,R]=(0,n.useState)("");(0,n.useEffect)(()=>{g&&k({id:g,email:"dr.sharma@example.com",phone:"+919876543210",role:"doctor",name:"Dr. Rajesh Sharma",specializations:["Cardiology"],experience:15,qualifications:["MBBS","MD"],clinicAddress:{street:"123 Medical Street",city:"Delhi",state:"Delhi",zipCode:"110001",coordinates:{latitude:28.6139,longitude:77.209}},consultationFee:500,emergencyFee:1e3,availability:{days:{monday:{available:!0,slots:[{start:"09:00",end:"10:00",available:!0},{start:"10:00",end:"11:00",available:!0},{start:"14:00",end:"15:00",available:!0}]}},timezone:"Asia/Kolkata"},emergencyAvailable:!0,verified:!0,verificationStatus:"approved",rating:4.8,totalReviews:120,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})},[g]),(0,n.useEffect)(()=>{if(j&&v&&P)try{let e=(0,p.fp)(j.consultationFee,C,y,.8);I(e)}catch(t){let e=(0,b.S3)(t,"Failed to calculate payment");N.ZP.error(e)}else I(null)},[j,v,P,C,y]);let H=e=>{try{if(!(0,b.m2)(e)){N.ZP.error("Please select a future date");return}S(e),E("time")}catch(t){let e=(0,b.S3)(t,"Failed to select date");N.ZP.error(e)}},F=e=>{D(e),E("payment")};return j?(0,a.jsxs)("div",{className:"min-h-screen bg-white dark:bg-slate-900 py-8",children:[(0,a.jsxs)("div",{className:"container mx-auto px-4 max-w-4xl",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-neutral-100 mb-4",children:"Book Appointment"}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:j.name}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:j.specializations.join(", ")}),(0,a.jsxs)("p",{className:"text-sm text-neutral-500 dark:text-neutral-500 mt-1",children:["\uD83D\uDCCD ",j.clinicAddress.street,", ",j.clinicAddress.city]})]})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700 mb-6",children:(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:C,onChange:e=>M(e.target.checked),className:"w-5 h-5 text-emergency-500 rounded focus:ring-emergency-500"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-emergency-500"}),(0,a.jsx)("span",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"Emergency Appointment"})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Higher fees apply for emergency bookings"})]})]})}),"date"===Z&&(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-neutral-900 dark:text-neutral-100",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-primary-500"}),"Select Date"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:(()=>{let e=[],t=new Date;for(let r=1;r<=14;r++){let a=new Date(t);a.setDate(t.getDate()+r),e.push(a.toISOString().split("T")[0])}return e})().map(e=>(0,a.jsxs)("button",{onClick:()=>H(e),className:"p-4 rounded-lg border-2 transition-all text-center ".concat(v===e?"border-primary-500 bg-primary-50 dark:bg-primary-900":"border-neutral-200 dark:border-neutral-700 hover:border-primary-300"),children:[(0,a.jsx)("div",{className:"text-sm font-medium text-neutral-600 dark:text-neutral-400",children:(0,h.p6)(e,"EEE")}),(0,a.jsx)("div",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:(0,h.p6)(e,"d")}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:(0,h.p6)(e,"MMM")})]},e))})]}),"time"===Z&&v&&(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold flex items-center gap-2 text-neutral-900 dark:text-neutral-100",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-primary-500"}),"Select Time"]}),(0,a.jsx)("button",{onClick:()=>E("date"),className:"text-sm text-primary-500 hover:text-primary-600",children:"Change Date"})]}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-4",children:(0,h.p6)(v,"EEEE, MMMM d, yyyy")}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:null===(t=j.availability.days.monday)||void 0===t?void 0:null===(e=t.slots)||void 0===e?void 0:e.filter(e=>e.available).map((e,t)=>(0,a.jsx)("button",{onClick:()=>F(e),className:"p-4 rounded-lg border-2 border-neutral-200 dark:border-neutral-700 hover:border-primary-500 transition-all text-center text-neutral-900 dark:text-neutral-100 font-medium",children:(0,h.KL)(e.start,e.end)},t))})]}),"payment"===Z&&A&&(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-neutral-900 dark:text-neutral-100",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-primary-500"}),"Payment Summary"]}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Consultation Fee"}),(0,a.jsx)("span",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:(0,h.xG)(A.consultationFee)})]}),A.emergencySurcharge&&A.emergencySurcharge>0&&(0,a.jsxs)("div",{className:"flex justify-between text-emergency-600",children:[(0,a.jsx)("span",{children:"Emergency Surcharge"}),(0,a.jsxs)("span",{className:"font-medium",children:["+",(0,h.xG)(A.emergencySurcharge)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Platform Fee (7%)"}),(0,a.jsx)("span",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:(0,h.xG)(A.platformFee)})]}),A.subscriptionDiscount&&A.subscriptionDiscount>0&&(0,a.jsxs)("div",{className:"flex justify-between text-success-600",children:[(0,a.jsx)("span",{children:"Subscription Discount"}),(0,a.jsxs)("span",{className:"font-medium",children:["-",(0,h.xG)(A.subscriptionDiscount)]})]}),(0,a.jsxs)("div",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-3 flex justify-between text-lg font-bold",children:[(0,a.jsx)("span",{className:"text-neutral-900 dark:text-neutral-100",children:"Total Amount"}),(0,a.jsx)("span",{className:"text-primary-500",children:(0,h.xG)(A.totalAmount)})]})]}),(0,a.jsx)("div",{className:"bg-primary-50 dark:bg-primary-900/20 p-4 rounded-xl mb-6",children:(0,a.jsx)("p",{className:"text-sm text-primary-700 dark:text-primary-300",children:"\uD83D\uDCB3 Multiple payment options available: UPI, Credit/Debit Card, Wallet"})}),(0,a.jsxs)("button",{onClick:()=>{if(!v||!P||!A){N.ZP.error("Please complete all booking details");return}if(!(null==y?void 0:y.id)){N.ZP.error("Please login to continue"),r.push("/auth/login?role=patient");return}if(!(0,b.m2)(v)){N.ZP.error("Please select a valid future date");return}T(!0)},className:"w-full bg-primary-500 text-white py-3 rounded-lg font-medium hover:bg-primary-600 transition-colors",children:["Pay ",(0,h.xG)(A.totalAmount)]})]}),"confirmation"===Z&&(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-8 border border-neutral-200 dark:border-neutral-700 text-center",children:[(0,a.jsx)(u.Z,{className:"w-16 h-16 text-success-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100 mb-2",children:"Appointment Confirmed!"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 mb-6",children:"Your appointment has been booked successfully."}),(0,a.jsxs)("div",{className:"bg-primary-50 dark:bg-primary-900 p-6 rounded-lg mb-6",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-2",children:"Your OTP for clinic visit:"}),(0,a.jsx)("p",{className:"text-4xl font-bold text-primary-500",children:U}),(0,a.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:"Show this OTP to the doctor at the clinic"})]}),(0,a.jsxs)("div",{className:"bg-neutral-50 dark:bg-neutral-900 p-4 rounded-lg mb-6 text-left",children:[(0,a.jsx)("h4",{className:"font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:"Appointment Details"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-neutral-600 dark:text-neutral-400",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Doctor:"})," ",j.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",(0,h.p6)(v,"EEEE, MMMM d, yyyy")]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Time:"})," ",P&&(0,h.KL)(P.start,P.end)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Type:"})," ",C?"Emergency":"Normal"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Amount Paid:"})," ",A&&(0,h.xG)(A.totalAmount)]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:[(0,a.jsx)("button",{onClick:()=>r.push("/patient/appointments"),className:"px-6 py-3 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition-colors",children:"View Appointments"}),(0,a.jsx)("button",{onClick:()=>r.push("/patient/discover"),className:"px-6 py-3 border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300 rounded-lg font-medium hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:"Find More Doctors"})]})]})]}),O&&A&&P&&(0,a.jsx)(w,{isOpen:O,onClose:()=>T(!1),onSuccess:(e,t)=>{if(T(!1),j&&P&&A)try{let r=f({patientId:(null==y?void 0:y.id)||"",doctorId:j.id,doctor:j,date:v,timeSlot:{...P,available:!1},type:C?"emergency":"normal",status:"confirmed",otpVerified:!1,payment:{...A,status:"completed",transactionId:e,paymentMethod:t}});R(r.otp||""),N.ZP.success("Appointment booked successfully!"),E("confirmation")}catch(t){let e=(0,b.S3)(t,"Failed to create appointment");N.ZP.error(e)}},amount:A.totalAmount,doctorName:j.name,appointmentDate:(0,h.p6)(v,"MMMM d, yyyy"),appointmentTime:(0,h.KL)(P.start,P.end)})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-primary-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Loading doctor details..."})]})})}function P(){return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-slate-900",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 animate-spin text-primary-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Loading booking..."})]})})}function D(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)(P,{}),children:(0,a.jsx)(S,{})})}},652:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var a=r(3020),n=r(4302),s=r(8608);let l=(0,a.Ue)()((0,n.tJ)((e,t)=>({appointments:[],isHydrated:!1,addAppointment:t=>{let r={...t,id:"apt-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),otp:(0,s.P)(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(e=>({appointments:[...e.appointments,r]})),r},updateAppointment:(t,r)=>{e(e=>({appointments:e.appointments.map(e=>e.id===t?{...e,...r,updatedAt:new Date().toISOString()}:e)}))},cancelAppointment:t=>{e(e=>({appointments:e.appointments.map(e=>e.id===t?{...e,status:"cancelled",updatedAt:new Date().toISOString()}:e)}))},getAppointmentsByPatient:e=>t().appointments.filter(t=>t.patientId===e),getAppointmentsByDoctor:e=>t().appointments.filter(t=>t.doctorId===e),getAppointmentById:e=>t().appointments.find(t=>t.id===e),setHydrated:()=>e({isHydrated:!0})}),{name:"sangman-appointments",storage:(0,n.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e&&e.setHydrated()}}))},6352:function(e,t,r){"use strict";r.d(t,{t:function(){return s}});var a=r(3020),n=r(4302);let s=(0,a.Ue)()((0,n.tJ)((e,t)=>({user:null,token:null,isAuthenticated:!1,isHydrated:!1,login:(t,r)=>{e({user:t,token:r,isAuthenticated:!0})},logout:()=>{e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null})),setHydrated:()=>e({isHydrated:!0})}),{name:"sangman-auth",storage:(0,n.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e&&e.setHydrated()}}))},8608:function(e,t,r){"use strict";r.d(t,{P:function(){return s},fp:function(){return n}});var a=r(4102);function n(e,t,r){var n,s,l;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=e*a.ak.COMMISSION_RATE,d=(null==r?void 0:null===(n=r.subscription)||void 0===n?void 0:n.status)==="active"?e*a.ak.SUBSCRIPTION_DISCOUNT:0,c=0;if(t){let t;s=function(){let e=new Date().getHours();return e>=a.ak.NIGHT_HOURS.start||e<a.ak.NIGHT_HOURS.end}(),l=function(){let e=new Date().getHours();return e>=a.ak.PEAK_HOURS.start&&e<a.ak.PEAK_HOURS.end}(),t=a.ak.DEFAULT_EMERGENCY_MULTIPLIER,s?t*=1.5:l&&(t*=1.3),c=e*((t*=1+(1-i)*.5)-1)}let u=e+c;return{consultationFee:e,platformFee:o,emergencySurcharge:t?c:void 0,subscriptionDiscount:d>0?d:void 0,totalAmount:Math.max(0,u+o-d),status:"pending",paymentMethod:"card"}}function s(){return Math.floor(1e5+9e5*Math.random()).toString()}},4931:function(e,t,r){"use strict";r.d(t,{L$:function(){return s},S3:function(){return l},m2:function(){return n}});class a extends Error{constructor(e,t,r=500,n){super(e),this.code=t,this.statusCode=r,this.details=n,this.name="AppError",Object.setPrototypeOf(this,a.prototype)}}function n(e){let t=new Date(e),r=new Date;return r.setHours(0,0,0,0),t>=r}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxSize:r=10,allowedTypes:a=["image/jpeg","image/png","application/pdf"]}=t;return e.size/1048576>r?{valid:!1,error:"File size must be less than ".concat(r,"MB")}:a.includes(e.type)?{valid:!0}:{valid:!1,error:"File type not allowed. Allowed types: ".concat(a.join(", "))}}function l(e,t){return t||function(e){if(e instanceof a)return e.message;if(e.response){let t=e.response.status,r=e.response.data;switch(t){case 400:return(null==r?void 0:r.message)||"Invalid request. Please check your input.";case 401:return"Please login to continue.";case 403:return"You do not have permission to perform this action.";case 404:return"The requested resource was not found.";case 422:return(null==r?void 0:r.message)||"Validation failed. Please check your input.";case 429:return"Too many requests. Please try again later.";case 500:return"Server error. Please try again later.";case 503:return"Service temporarily unavailable. Please try again later.";default:return(null==r?void 0:r.message)||"An error occurred. Please try again."}}return e.request?"Unable to connect to server. Please check your internet connection.":"An unexpected error occurred. Please try again."}(e)}},3784:function(e,t,r){"use strict";r.d(t,{KL:function(){return l},WN:function(){return i},p6:function(){return s},xG:function(){return n}});var a=r(6540);function n(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PPP";return(0,a.Z)(new Date(e),t)}function l(e,t){let r=e=>{let[t,r]=e.split(":").map(Number);return"".concat(t%12||12,":").concat(r.toString().padStart(2,"0")," ").concat(t>=12?"PM":"AM")};return"".concat(r(e)," - ").concat(r(t))}function i(e){return e<1e3?"".concat(Math.round(e)," m"):"".concat((e/1e3).toFixed(1)," km")}}},function(e){e.O(0,[9463,6028,6540,7115,2364,1744],function(){return e(e.s=3939)}),_N_E=e.O()}]);