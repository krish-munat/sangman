(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9723],{541:function(e,t,n){Promise.resolve().then(n.bind(n,8677))},2828:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(8322).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3778:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(8322).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1996:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(8322).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5758:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(8322).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9578:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(8322).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7746:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(8322).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},4102:function(e,t,n){"use strict";n.d(t,{ak:function(){return a},fr:function(){return r}});let a={COMMISSION_RATE:.07,SUBSCRIPTION_DISCOUNT:.1,DEFAULT_EMERGENCY_MULTIPLIER:1.5,NIGHT_HOURS:{start:22,end:6},PEAK_HOURS:{start:18,end:22}},r=["General Medicine","Cardiology","Dermatology","Orthopedics","Pediatrics","Gynecology","Neurology","Psychiatry","Ophthalmology","ENT","Dentistry","Oncology","Urology","Gastroenterology","Endocrinology"]},8677:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n(7821),r=n(8078),s=n(9578),i=n(3778),l=n(2828),o=n(1996),c=n(5758),d=n(7746),u=n(6352),m=n(652),p=n(3784),x=n(6028);function h(){let{user:e}=(0,u.t)(),{appointments:t,getAppointmentsByPatient:n,cancelAppointment:h,isHydrated:y}=(0,m.O)(),[g,f]=(0,r.useState)([]),[b,k]=(0,r.useState)("all");(0,r.useEffect)(()=>{if(!(null==e?void 0:e.id)||!y)return;let t=n(e.id);0===t.length?f([{id:"demo-1",patientId:e.id,doctorId:"doc-1",doctor:{id:"doc-1",email:"dr.sharma@example.com",phone:"+919876543210",role:"doctor",name:"Dr. Rajesh Sharma",specializations:["Cardiology"],experience:15,qualifications:["MBBS","MD"],clinicAddress:{street:"123 Medical Street",city:"Delhi",state:"Delhi",zipCode:"110001",coordinates:{latitude:28.6139,longitude:77.209}},consultationFee:500,availability:{days:{},timezone:"Asia/Kolkata"},emergencyAvailable:!0,verified:!0,verificationStatus:"approved",rating:4.8,totalReviews:120,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},date:new Date(Date.now()+864e5).toISOString().split("T")[0],timeSlot:{start:"10:00",end:"11:00",available:!1},type:"normal",status:"confirmed",otp:"123456",otpVerified:!1,payment:{consultationFee:500,platformFee:35,totalAmount:535,status:"completed",paymentMethod:"card"},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]):f(t)},[null==e?void 0:e.id,y,t,n]);let v=g.filter(e=>"all"===b||("upcoming"===b?new Date("".concat(e.date,"T").concat(e.timeSlot.start))>new Date&&"completed"!==e.status&&"cancelled"!==e.status:"past"===b?new Date("".concat(e.date,"T").concat(e.timeSlot.start))<new Date:"completed"!==b||"completed"===e.status)),N=async e=>{try{e.startsWith("demo-")?f(t=>t.map(t=>t.id===e?{...t,status:"cancelled"}:t)):h(e),x.ZP.success("Appointment cancelled successfully")}catch(t){let e=(null==t?void 0:t.message)||"Failed to cancel appointment";x.ZP.error(e)}},j=e=>{try{(0,x.ZP)("Review feature coming soon",{icon:"ℹ️",style:{background:"#3b82f6",color:"#fff"}})}catch(t){let e=(null==t?void 0:t.message)||"Failed to open review";x.ZP.error(e)}},w=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"pending":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400";case"completed":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"cancelled":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"rejected":return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400";default:return"bg-gray-100 text-gray-700"}};return y?(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-slate-900 py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-neutral-100",children:"My Appointments"}),(0,a.jsxs)("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[v.length," appointment",1!==v.length?"s":""]})]}),(0,a.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:["all","upcoming","past","completed"].map(e=>(0,a.jsx)("button",{onClick:()=>k(e),className:"px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ".concat(b===e?"bg-primary-500 text-white":"bg-white dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),0===v.length?(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-12 text-center border border-neutral-200 dark:border-neutral-700",children:[(0,a.jsx)(i.Z,{className:"w-16 h-16 text-neutral-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:"No appointments found"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 mb-6",children:"all"===b?"You haven't booked any appointments yet.":"No ".concat(b," appointments to show.")}),(0,a.jsx)("a",{href:"/patient/discover",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition-colors",children:"Find Doctors"})]}):(0,a.jsx)("div",{className:"space-y-4",children:v.map(e=>{var t,n,r,s;return(0,a.jsx)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700",children:(0,a.jsx)("div",{className:"flex flex-col md:flex-row gap-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-1",children:null===(t=e.doctor)||void 0===t?void 0:t.name}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:null===(n=e.doctor)||void 0===n?void 0:n.specializations.join(", ")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["emergency"===e.type&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-emergency-100 text-emergency-700 dark:bg-emergency-900/30 dark:text-emergency-400 text-xs rounded-full flex items-center gap-1",children:[(0,a.jsx)(l.Z,{className:"w-3 h-3"}),"Emergency"]}),(0,a.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full ".concat(w(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-600 dark:text-neutral-400",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{children:(0,p.p6)(e.date,"EEEE, MMMM d, yyyy")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-600 dark:text-neutral-400",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{children:(0,p.KL)(e.timeSlot.start,e.timeSlot.end)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-600 dark:text-neutral-400",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsxs)("span",{children:[null===(r=e.doctor)||void 0===r?void 0:r.clinicAddress.street,","," ",null===(s=e.doctor)||void 0===s?void 0:s.clinicAddress.city]})]})]}),e.otp&&!e.otpVerified&&"confirmed"===e.status&&(0,a.jsxs)("div",{className:"bg-primary-50 dark:bg-primary-900/20 p-4 rounded-xl mb-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-primary-700 dark:text-primary-300 mb-1",children:"Your OTP for clinic visit:"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-primary-500",children:e.otp}),(0,a.jsx)("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mt-1",children:"Show this to the doctor at the clinic"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Amount Paid:"}),(0,a.jsx)("span",{className:"ml-2 font-semibold text-neutral-900 dark:text-neutral-100",children:(0,p.xG)(e.payment.totalAmount)}),e.payment.transactionId&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-neutral-500",children:["(TXN: ",e.payment.transactionId,")"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:["confirmed"===e.status&&(0,a.jsx)("button",{onClick:()=>N(e.id),className:"px-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-lg text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:"Cancel"}),"completed"===e.status&&(0,a.jsxs)("button",{onClick:()=>j(e.id),className:"px-4 py-2 bg-primary-500 text-white rounded-lg text-sm font-medium hover:bg-primary-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Review"]})]})]})]})})},e.id)})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-slate-900 py-8 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(s.Z,{className:"w-8 h-8 animate-spin text-primary-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Loading appointments..."})]})})}},652:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var a=n(3020),r=n(4302),s=n(8608);let i=(0,a.Ue)()((0,r.tJ)((e,t)=>({appointments:[],isHydrated:!1,addAppointment:t=>{let n={...t,id:"apt-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),otp:(0,s.P)(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(e=>({appointments:[...e.appointments,n]})),n},updateAppointment:(t,n)=>{e(e=>({appointments:e.appointments.map(e=>e.id===t?{...e,...n,updatedAt:new Date().toISOString()}:e)}))},cancelAppointment:t=>{e(e=>({appointments:e.appointments.map(e=>e.id===t?{...e,status:"cancelled",updatedAt:new Date().toISOString()}:e)}))},getAppointmentsByPatient:e=>t().appointments.filter(t=>t.patientId===e),getAppointmentsByDoctor:e=>t().appointments.filter(t=>t.doctorId===e),getAppointmentById:e=>t().appointments.find(t=>t.id===e),setHydrated:()=>e({isHydrated:!0})}),{name:"sangman-appointments",storage:(0,r.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e&&e.setHydrated()}}))},6352:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var a=n(3020),r=n(4302);let s=(0,a.Ue)()((0,r.tJ)((e,t)=>({user:null,token:null,isAuthenticated:!1,isHydrated:!1,login:(t,n)=>{e({user:t,token:n,isAuthenticated:!0})},logout:()=>{e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null})),setHydrated:()=>e({isHydrated:!0})}),{name:"sangman-auth",storage:(0,r.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e&&e.setHydrated()}}))},8608:function(e,t,n){"use strict";n.d(t,{P:function(){return s},fp:function(){return r}});var a=n(4102);function r(e,t,n){var r,s,i;let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=e*a.ak.COMMISSION_RATE,c=(null==n?void 0:null===(r=n.subscription)||void 0===r?void 0:r.status)==="active"?e*a.ak.SUBSCRIPTION_DISCOUNT:0,d=0;if(t){let t;s=function(){let e=new Date().getHours();return e>=a.ak.NIGHT_HOURS.start||e<a.ak.NIGHT_HOURS.end}(),i=function(){let e=new Date().getHours();return e>=a.ak.PEAK_HOURS.start&&e<a.ak.PEAK_HOURS.end}(),t=a.ak.DEFAULT_EMERGENCY_MULTIPLIER,s?t*=1.5:i&&(t*=1.3),d=e*((t*=1+(1-l)*.5)-1)}let u=e+d;return{consultationFee:e,platformFee:o,emergencySurcharge:t?d:void 0,subscriptionDiscount:c>0?c:void 0,totalAmount:Math.max(0,u+o-c),status:"pending",paymentMethod:"card"}}function s(){return Math.floor(1e5+9e5*Math.random()).toString()}},3784:function(e,t,n){"use strict";n.d(t,{KL:function(){return i},WN:function(){return l},p6:function(){return s},xG:function(){return r}});var a=n(6540);function r(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PPP";return(0,a.Z)(new Date(e),t)}function i(e,t){let n=e=>{let[t,n]=e.split(":").map(Number);return"".concat(t%12||12,":").concat(n.toString().padStart(2,"0")," ").concat(t>=12?"PM":"AM")};return"".concat(n(e)," - ").concat(n(t))}function l(e){return e<1e3?"".concat(Math.round(e)," m"):"".concat((e/1e3).toFixed(1)," km")}}},function(e){e.O(0,[9463,6028,6540,7115,2364,1744],function(){return e(e.s=541)}),_N_E=e.O()}]);