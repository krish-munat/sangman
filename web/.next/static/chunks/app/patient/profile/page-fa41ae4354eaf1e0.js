(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9461],{2405:function(e,t,r){Promise.resolve().then(r.bind(r,6615))},2828:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5813:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3778:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},4713:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},5818:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},6515:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},20:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9024:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},9198:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},961:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3116:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8322).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6615:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var a=r(7821),l=r(8078),n=r(8322);let s=(0,n.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);var o=r(2531),i=r(9198),d=r(3778),c=r(432),u=r(4811),m=r(20),x=r(5813),h=r(6515);let g=(0,n.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var b=r(3116),p=r(6352),f=r(746),y=r(6028),v=r(3960);let j=(0,n.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),N=(0,n.Z)("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);var k=r(9024),w=r(2828),D=r(2348),C=r(5818);let L=[{value:"id_proof",label:"ID Proof (Aadhaar/PAN)"},{value:"medical_report",label:"Medical Report"},{value:"prescription",label:"Prescription"},{value:"insurance",label:"Insurance Document"},{value:"other",label:"Other Document"}];function A(e){let{documents:t,onUpload:r,onRemove:n,maxFiles:s=10,maxSizeMB:o=5,acceptedTypes:i=["image/*","application/pdf",".doc",".docx"],label:d="Upload Documents",hint:c="Upload medical records, prescriptions, or ID proofs"}=e,[u,m]=(0,l.useState)(!1),[x,g]=(0,l.useState)("medical_report"),[p,f]=(0,l.useState)(null),[y,v]=(0,l.useState)(!1),A=(0,l.useRef)(null),Z=async e=>{if(f(null),t.length+e.length>s){f("Maximum ".concat(s," files allowed"));return}for(let t of e){if(t.size>1048576*o){f("File ".concat(t.name," exceeds ").concat(o,"MB limit"));continue}v(!0),await new Promise(e=>setTimeout(e,500));let e=URL.createObjectURL(t);r({name:t.name,type:x,url:e,size:t.size}),v(!1)}},O=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):"".concat((e/1048576).toFixed(1)," MB"),M=e=>{var t;let r=null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(r||"")?(0,a.jsx)(j,{className:"w-5 h-5 text-sky-500"}):"pdf"===r?(0,a.jsx)(h.Z,{className:"w-5 h-5 text-red-500"}):(0,a.jsx)(N,{className:"w-5 h-5 text-gray-500"})},S=e=>{var t;return(null===(t=L.find(t=>t.value===e))||void 0===t?void 0:t.label)||e};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:d}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[t.length,"/",s," files"]})]}),c&&(0,a.jsx)("p",{className:"text-xs text-gray-500 -mt-2",children:c}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:L.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>g(e.value),className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-all ".concat(x===e.value?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.label},e.value))}),(0,a.jsxs)("div",{onDragOver:e=>{e.preventDefault(),m(!0)},onDragLeave:e=>{e.preventDefault(),m(!1)},onDrop:e=>{e.preventDefault(),m(!1),Z(Array.from(e.dataTransfer.files))},onClick:()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.click()},className:"\n          relative border-2 border-dashed rounded-xl p-6 text-center cursor-pointer transition-all\n          ".concat(u?"border-sky-500 bg-sky-50":"border-gray-200 hover:border-sky-300 hover:bg-gray-50","\n          ").concat(y?"pointer-events-none opacity-50":"","\n        "),children:[(0,a.jsx)("input",{ref:A,type:"file",multiple:!0,accept:i.join(","),onChange:e=>{Z(Array.from(e.target.files||[])),A.current&&(A.current.value="")},className:"hidden"}),(0,a.jsx)("div",{className:"flex flex-col items-center gap-2",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-10 h-10 border-4 border-sky-500 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Uploading..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(k.Z,{className:"w-6 h-6 text-sky-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Drop files here or ",(0,a.jsx)("span",{className:"text-sky-600",children:"browse"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["PDF, Images, Documents up to ",o,"MB"]})]})]})})]}),p&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("p",{className:"text-sm text-red-600",children:p})]}),t.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Uploaded Documents"}),(0,a.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[M(e.name),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate max-w-[200px]",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,a.jsx)("span",{children:S(e.type)}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:O(e.size)})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:"View",children:(0,a.jsx)(D.Z,{className:"w-4 h-4 text-gray-600"})}),(0,a.jsx)("a",{href:e.url,download:e.name,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:"Download",children:(0,a.jsx)(C.Z,{className:"w-4 h-4 text-gray-600"})}),(0,a.jsx)("button",{type:"button",onClick:()=>n(e.id),className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"Remove",children:(0,a.jsx)(b.Z,{className:"w-4 h-4 text-red-500"})})]})]},e.id))})]})]})}var Z=r(961);let O=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),M=(0,n.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),S=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var B=r(3020),P=r(4302);function E(e){let t=new Date,r=new Date(e),a=t.getFullYear()-r.getFullYear(),l=t.getMonth()-r.getMonth();return(l<0||0===l&&t.getDate()<r.getDate())&&a--,a}let F={MIN_ADULT_AGE:18,MAX_CHILD_AGE:16},G=()=>"member-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),H=(0,B.Ue)()((0,P.tJ)((e,t)=>({members:[],isHydrated:!1,addMember:t=>{let r={...t,id:G(),age:E(t.dateOfBirth),documents:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(e=>({members:[...e.members,r]})),r},updateMember:(t,r)=>{e(e=>({members:e.members.map(e=>e.id===t?{...e,...r,age:r.dateOfBirth?E(r.dateOfBirth):e.age,updatedAt:new Date().toISOString()}:e)}))},removeMember:t=>{e(e=>({members:e.members.filter(e=>e.id!==t)}))},getMembersByParent:e=>t().members.filter(t=>t.parentUserId===e),getMemberById:e=>t().members.find(t=>t.id===e),addDocumentToMember:(t,r)=>{let a={...r,id:"doc-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),uploadedAt:new Date().toISOString()};e(e=>({members:e.members.map(e=>e.id===t?{...e,documents:[...e.documents||[],a],updatedAt:new Date().toISOString()}:e)}))},removeDocumentFromMember:(t,r)=>{e(e=>({members:e.members.map(e=>e.id===t?{...e,documents:(e.documents||[]).filter(e=>e.id!==r),updatedAt:new Date().toISOString()}:e)}))}}),{name:"family-members-storage",onRehydrateStorage:()=>e=>{e&&(e.isHydrated=!0)}})),I=["A+","A-","B+","B-","AB+","AB-","O+","O-"],_=[{value:"son",label:"Son",icon:"\uD83D\uDC66"},{value:"daughter",label:"Daughter",icon:"\uD83D\uDC67"},{value:"spouse",label:"Spouse",icon:"\uD83D\uDC91"},{value:"parent",label:"Parent",icon:"\uD83D\uDC74"},{value:"other",label:"Other",icon:"\uD83D\uDC64"}];function U(e){let{isOpen:t,onClose:r,parentUserId:n,editMember:s}=e,{addMember:c,updateMember:u}=H(),[m,x]=(0,l.useState)({name:(null==s?void 0:s.name)||"",dateOfBirth:(null==s?void 0:s.dateOfBirth)||"",gender:(null==s?void 0:s.gender)||"male",relation:(null==s?void 0:s.relation)||"son",bloodGroup:(null==s?void 0:s.bloodGroup)||"",allergies:(null==s?void 0:s.allergies)||"",medicalHistory:(null==s?void 0:s.medicalHistory)||""}),[h,g]=(0,l.useState)({}),[p,f]=(0,l.useState)(!1),v=m.dateOfBirth?E(m.dateOfBirth):null,j=()=>{let e={};if(m.name.trim()?m.name.length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",m.dateOfBirth){let t=E(m.dateOfBirth);t<0&&(e.dateOfBirth="Invalid date of birth"),("son"===m.relation||"daughter"===m.relation)&&t>F.MAX_CHILD_AGE&&(e.dateOfBirth="Children profiles are only allowed for dependents aged ".concat(F.MAX_CHILD_AGE," or below"))}else e.dateOfBirth="Date of birth is required";return m.gender||(e.gender="Gender is required"),m.relation||(e.relation="Relationship is required"),g(e),0===Object.keys(e).length},N=async e=>{if(e.preventDefault(),j()){f(!0);try{await new Promise(e=>setTimeout(e,500)),s?(u(s.id,{name:m.name,dateOfBirth:m.dateOfBirth,gender:m.gender,relation:m.relation,bloodGroup:m.bloodGroup||void 0,allergies:m.allergies||void 0,medicalHistory:m.medicalHistory||void 0}),y.ZP.success("Profile updated successfully!")):(c({parentUserId:n,name:m.name,dateOfBirth:m.dateOfBirth,age:E(m.dateOfBirth),gender:m.gender,relation:m.relation,bloodGroup:m.bloodGroup||void 0,allergies:m.allergies||void 0,medicalHistory:m.medicalHistory||void 0}),y.ZP.success("Family member added successfully!")),r()}catch(e){y.ZP.error("Failed to save profile. Please try again.")}finally{f(!1)}}},k=(e,t)=>{x(r=>({...r,[e]:t})),h[e]&&g(t=>({...t,[e]:""}))};return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),(0,a.jsxs)("div",{className:"relative w-full max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden my-8",children:[(0,a.jsxs)("div",{className:"relative bg-gradient-to-r from-sky-500 to-emerald-500 px-6 py-6 text-white",children:[(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors",children:(0,a.jsx)(b.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:(0,a.jsx)(Z.Z,{className:"w-7 h-7"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:s?"Edit Family Member":"Add Family Member"}),(0,a.jsx)("p",{className:"text-white/80 text-sm mt-0.5",children:s?"Update profile details":"Create a profile for your family member"})]})]})]}),(0,a.jsxs)("form",{onSubmit:N,className:"p-6 space-y-5 max-h-[60vh] overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Relationship"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:_.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>k("relation",e.value),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat(m.relation===e.value?"bg-sky-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.label})]},e.value))}),h.relation&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.relation})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:m.name,onChange:e=>k("name",e.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border ".concat(h.name?"border-red-300 bg-red-50":"border-gray-200"," focus:outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500"),placeholder:"Enter full name"})]}),h.name&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date of Birth"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"date",value:m.dateOfBirth,onChange:e=>k("dateOfBirth",e.target.value),max:new Date().toISOString().split("T")[0],className:"w-full pl-11 pr-4 py-3 rounded-xl border ".concat(h.dateOfBirth?"border-red-300 bg-red-50":"border-gray-200"," focus:outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500")})]}),null!==v&&(0,a.jsxs)("div",{className:"px-4 py-3 rounded-xl flex items-center gap-2 ".concat(("son"===m.relation||"daughter"===m.relation)&&v>F.MAX_CHILD_AGE?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700"),children:[(0,a.jsx)("span",{className:"font-bold",children:v}),(0,a.jsx)("span",{className:"text-sm",children:"years"})]})]}),h.dateOfBirth&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.dateOfBirth}),("son"===m.relation||"daughter"===m.relation)&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,a.jsx)(w.Z,{className:"w-3 h-3 inline mr-1"}),"Children profiles are for dependents aged ",F.MAX_CHILD_AGE," or below"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Gender"}),(0,a.jsx)("div",{className:"flex gap-2",children:[{value:"male",label:"Male",icon:"\uD83D\uDC68"},{value:"female",label:"Female",icon:"\uD83D\uDC69"},{value:"other",label:"Other",icon:"\uD83E\uDDD1"}].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>k("gender",e.value),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all ".concat(m.gender===e.value?"bg-sky-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Blood Group (Optional)"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:I.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>k("bloodGroup",m.bloodGroup===e?"":e),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-all ".concat(m.bloodGroup===e?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Known Allergies (Optional)"}),(0,a.jsx)("textarea",{value:m.allergies,onChange:e=>k("allergies",e.target.value),rows:2,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 resize-none",placeholder:"e.g., Peanuts, Penicillin, Dust"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Medical History (Optional)"}),(0,a.jsx)("textarea",{value:m.medicalHistory,onChange:e=>k("medicalHistory",e.target.value),rows:3,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 resize-none",placeholder:"Any previous surgeries, chronic conditions, or ongoing treatments"})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"flex-1 py-3 rounded-xl border border-gray-200 text-gray-600 font-semibold hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:N,disabled:p,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-sky-500 to-emerald-500 text-white font-semibold hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),s?"Update Profile":"Add Member"]})})]})]})]}):null}function q(e){let{parentUserId:t}=e,{getMembersByParent:r,removeMember:n}=H(),[s,o]=(0,l.useState)(!1),[i,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),g=r(t),b=async e=>{if(confirm("Are you sure you want to remove ".concat(e.name,"'s profile?"))){h(e.id);try{await new Promise(e=>setTimeout(e,300)),n(e.id),y.ZP.success("".concat(e.name,"'s profile removed"))}finally{h(null)}}},p=e=>{u(e),o(!0)},f=e=>{switch(e){case"son":return"\uD83D\uDC66";case"daughter":return"\uD83D\uDC67";case"spouse":return"\uD83D\uDC91";case"parent":return"\uD83D\uDC74";default:return"\uD83D\uDC64"}},v=e=>{switch(e){case"male":return"from-blue-500 to-cyan-500";case"female":return"from-pink-500 to-rose-500";default:return"from-purple-500 to-indigo-500"}};return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-sky-500 to-emerald-500 rounded-xl flex items-center justify-center",children:(0,a.jsx)(Z.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Family Members"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage profiles for your dependents"})]})]}),(0,a.jsxs)("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-sky-500 to-emerald-500 text-white rounded-xl font-semibold text-sm hover:opacity-90 transition-all shadow-md",children:[(0,a.jsx)(O,{className:"w-4 h-4"}),"Add Member"]})]})}),(0,a.jsx)("div",{className:"mx-6 mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-amber-800",children:"Child Profile Guidelines"}),(0,a.jsxs)("p",{className:"text-xs text-amber-700 mt-1",children:["You can create profiles for children under ",F.MAX_CHILD_AGE," years of age. These profiles allow you to book appointments and manage healthcare for your dependents."]})]})]})}),(0,a.jsx)("div",{className:"p-6",children:0===g.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(Z.Z,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Family Members Added"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mb-6 max-w-md mx-auto",children:"Add profiles for your children or other dependents to manage their healthcare from your account."}),(0,a.jsxs)("button",{onClick:()=>o(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-sky-500 text-white rounded-xl font-semibold hover:bg-sky-600 transition-colors",children:[(0,a.jsx)(O,{className:"w-5 h-5"}),"Add Your First Family Member"]})]}):(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:g.map(e=>(0,a.jsxs)("div",{className:"relative p-4 rounded-xl border-2 border-gray-100 hover:border-sky-200 transition-all group ".concat(m===e.id?"opacity-50 pointer-events-none":""),children:[(0,a.jsxs)("div",{className:"absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>p(e),className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-sky-50 hover:border-sky-200 transition-colors",title:"Edit",children:(0,a.jsx)(M,{className:"w-4 h-4 text-gray-600"})}),(0,a.jsx)("button",{onClick:()=>b(e),className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-red-50 hover:border-red-200 transition-colors",title:"Delete",children:(0,a.jsx)(S,{className:"w-4 h-4 text-red-500"})})]}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br ".concat(v(e.gender)," rounded-xl flex items-center justify-center flex-shrink-0"),children:(0,a.jsx)("span",{className:"text-2xl",children:f(e.relation)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 truncate",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full capitalize",children:e.relation})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[e.age," years old"]})]}),e.bloodGroup&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{children:e.bloodGroup})]})]}),e.allergies&&(0,a.jsxs)("p",{className:"mt-2 text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded-lg inline-block",children:["⚠️ Allergies: ",e.allergies]})]})]})]},e.id))})}),(0,a.jsx)(U,{isOpen:s,onClose:()=>{o(!1),u(null)},parentUserId:t,editMember:i})]})}var T=r(7432);let z=["A+","A-","B+","B-","AB+","AB-","O+","O-"],R=[{value:"",label:"Select Relationship"},{value:"father",label:"Father"},{value:"mother",label:"Mother"},{value:"husband",label:"Husband"},{value:"wife",label:"Wife"},{value:"son",label:"Son"},{value:"daughter",label:"Daughter"},{value:"brother",label:"Brother"},{value:"sister",label:"Sister"},{value:"grandfather",label:"Grandfather"},{value:"grandmother",label:"Grandmother"},{value:"uncle",label:"Uncle"},{value:"aunt",label:"Aunt"},{value:"nephew",label:"Nephew"},{value:"niece",label:"Niece"},{value:"cousin",label:"Cousin"},{value:"friend",label:"Friend"},{value:"colleague",label:"Colleague"},{value:"neighbor",label:"Neighbor"},{value:"guardian",label:"Guardian"},{value:"caretaker",label:"Caretaker"},{value:"other",label:"Other (specify below)"}];function V(){var e;let{user:t,updateUser:r,isHydrated:n}=(0,p.t)(),[j,N]=(0,l.useState)(!1),[k,w]=(0,l.useState)("+91"),[D,C]=(0,l.useState)(""),[L,Z]=(0,l.useState)(),[O,M]=(0,l.useState)(!1),[S,B]=(0,l.useState)([]),[P,G]=(0,l.useState)(),[H,I]=(0,l.useState)(null),[_,U]=(0,l.useState)(""),[V,X]=(0,l.useState)(""),{register:Y,handleSubmit:Q,formState:{errors:J},reset:K,setValue:W,watch:$}=(0,f.cI)({defaultValues:{name:"",dateOfBirth:"",bloodGroup:"",gender:"male",allergies:"",medicalHistory:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelation:""}}),ee=$("dateOfBirth");(0,l.useEffect)(()=>{if(ee){let e=E(ee);I(e),e<F.MIN_ADULT_AGE?G("You must be at least ".concat(F.MIN_ADULT_AGE," years old to create an independent account. For minors, please ask a parent/guardian to create a family profile.")):G(void 0)}else I(null),G(void 0)},[ee]),(0,l.useEffect)(()=>{if(t&&n){let e=(null==t?void 0:t.emergencyContact)||{};if(K({name:(null==t?void 0:t.name)||"",dateOfBirth:(null==t?void 0:t.dateOfBirth)||"",bloodGroup:(null==t?void 0:t.bloodGroup)||"",gender:(null==t?void 0:t.gender)||"male",allergies:(null==t?void 0:t.allergies)||"",medicalHistory:(null==t?void 0:t.medicalHistory)||"",emergencyContactName:(null==e?void 0:e.name)||"",emergencyContactPhone:(null==e?void 0:e.phone)||"",emergencyContactRelation:(null==e?void 0:e.relation)||""}),(null==t?void 0:t.documents)&&B(t.documents),null==e?void 0:e.phone){let t=e.phone,r=T.Qd.find(e=>t.startsWith(e.code));r?(w(r.code),C(t.replace(r.code,""))):C(t.replace(/^\+\d+/,""))}(null==e?void 0:e.relation)&&(R.some(t=>t.value===e.relation.toLowerCase())?(U(e.relation.toLowerCase()),X("")):(U("other"),X(e.relation)))}},[t,n,K]);let et=(e,r)=>{if(0===e.length)return Z(void 0),!0;let a=(0,T.BO)(e,r);if(!a.valid)return Z(a.error),!1;let l="".concat(r).concat(e),n=(null==t?void 0:t.phone)||"",s=(0,T.BP)(n,l);return s.valid?(Z(void 0),!0):(Z(s.error),!1)},er=async e=>{try{var a;if(e.dateOfBirth&&E(e.dateOfBirth)<F.MIN_ADULT_AGE){G("You must be at least ".concat(F.MIN_ADULT_AGE," years old")),y.ZP.error("Minimum age requirement not met");return}if(D.length>0){let e=(0,T.BO)(D,k);if(!e.valid){Z(e.error),y.ZP.error(e.error||"Invalid emergency phone number");return}let r="".concat(k).concat(D),a=(null==t?void 0:t.phone)||"",l=(0,T.BP)(a,r);if(!l.valid){Z(l.error),y.ZP.error(l.error||"Emergency phone must be different");return}}let l=D.length>0?"".concat(k).concat(D):"",n="other"===_?V:(null===(a=R.find(e=>e.value===_))||void 0===a?void 0:a.label)||_;r({name:e.name,dateOfBirth:e.dateOfBirth,bloodGroup:e.bloodGroup,gender:e.gender,allergies:e.allergies,medicalHistory:e.medicalHistory,documents:S,emergencyContact:{name:e.emergencyContactName,phone:l,relation:n},updatedAt:new Date().toISOString()}),y.ZP.success("Profile updated successfully!"),M(!0),N(!1),setTimeout(()=>M(!1),3e3)}catch(t){let e=(null==t?void 0:t.message)||"Failed to update profile";y.ZP.error(e)}};return n?(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-slate-900 py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 max-w-4xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-neutral-100",children:"My Profile"}),!j&&(0,a.jsxs)("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition-colors",children:[(0,a.jsx)(s,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Edit Profile"})]})]}),O&&(0,a.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4 mb-6 flex items-center gap-3",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-green-500"}),(0,a.jsx)("p",{className:"text-green-700 dark:text-green-300 font-medium",children:"Your profile has been saved successfully!"})]}),(0,a.jsxs)("form",{onSubmit:Q(er),children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700 mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-neutral-900 dark:text-neutral-100",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-primary-500"}),"Personal Information"]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300",children:"Full Name"}),(0,a.jsx)("input",{...Y("name",{required:"Name is required"}),disabled:!j,className:"w-full px-4 py-3 rounded-lg border bg-white dark:bg-neutral-800 \n                    text-neutral-900 dark:text-neutral-100\n                    ".concat(j?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed","\n                    ").concat(J.name?"border-red-500":"border-neutral-300 dark:border-neutral-600","\n                    focus:outline-none focus:ring-2 focus:ring-primary-500")}),J.name&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:J.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300 flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Date of Birth"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{...Y("dateOfBirth",{required:"Date of birth is required"}),type:"date",max:new Date().toISOString().split("T")[0],disabled:!j,className:"flex-1 px-4 py-3 rounded-lg border bg-white dark:bg-neutral-800 \n                      text-neutral-900 dark:text-neutral-100\n                      ".concat(j?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed","\n                      ").concat(P||J.dateOfBirth?"border-red-500":"border-neutral-300 dark:border-neutral-600","\n                      focus:outline-none focus:ring-2 focus:ring-primary-500")}),null!==H&&(0,a.jsxs)("div",{className:"px-4 py-3 rounded-lg flex items-center gap-2 font-semibold ".concat(H<F.MIN_ADULT_AGE?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400"),children:[H," yrs"]})]}),(P||J.dateOfBirth)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:P||(null===(e=J.dateOfBirth)||void 0===e?void 0:e.message)}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-neutral-500",children:["Minimum age: ",F.MIN_ADULT_AGE," years for independent account"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300",children:"Gender"}),(0,a.jsxs)("select",{...Y("gender"),disabled:!j,className:"w-full px-4 py-3 rounded-lg border bg-white dark:bg-neutral-800 \n                    text-neutral-900 dark:text-neutral-100\n                    ".concat(j?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed","\n                    border-neutral-300 dark:border-neutral-600\n                    focus:outline-none focus:ring-2 focus:ring-primary-500"),children:[(0,a.jsx)("option",{value:"male",children:"Male"}),(0,a.jsx)("option",{value:"female",children:"Female"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{children:"Blood Group"})]}),(0,a.jsxs)("select",{...Y("bloodGroup"),disabled:!j,className:"w-full px-4 py-3 rounded-lg border bg-white dark:bg-neutral-800 \n                    text-neutral-900 dark:text-neutral-100\n                    ".concat(j?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed","\n                    border-neutral-300 dark:border-neutral-600\n                    focus:outline-none focus:ring-2 focus:ring-primary-500"),children:[(0,a.jsx)("option",{value:"",children:"Select Blood Group"}),z.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300 flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Email"})]}),(0,a.jsx)("input",{type:"email",value:(null==t?void 0:t.email)||"",disabled:!0,className:"w-full px-4 py-3 rounded-lg border bg-neutral-100 dark:bg-neutral-700    text-neutral-900 dark:text-neutral-100 border-neutral-300 dark:border-neutral-600   cursor-not-allowed"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-500",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300 flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Phone"})]}),(0,a.jsx)("input",{type:"tel",value:(null==t?void 0:t.phone)||"",disabled:!0,className:"w-full px-4 py-3 rounded-lg border bg-neutral-100 dark:bg-neutral-700    text-neutral-900 dark:text-neutral-100 border-neutral-300 dark:border-neutral-600   cursor-not-allowed"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-500",children:"Phone cannot be changed"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300",children:"Known Allergies"}),(0,a.jsx)("input",{...Y("allergies"),disabled:!j,placeholder:"e.g., Peanuts, Penicillin, Dust (separate with commas)",className:"w-full px-4 py-3 rounded-lg border bg-white dark:bg-neutral-800 \n                  text-neutral-900 dark:text-neutral-100\n                  ".concat(j?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed","\n                  border-neutral-300 dark:border-neutral-600\n                  focus:outline-none focus:ring-2 focus:ring-primary-500")})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-neutral-900 dark:text-neutral-100",children:"Medical History"}),(0,a.jsx)("textarea",{...Y("medicalHistory"),disabled:!j,rows:4,className:"w-full px-4 py-3 rounded-lg border bg-white dark:bg-neutral-800 \n                text-neutral-900 dark:text-neutral-100\n                ".concat(j?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed","\n                border-neutral-300 dark:border-neutral-600\n                focus:outline-none focus:ring-2 focus:ring-primary-500"),placeholder:"Enter your medical history (allergies, chronic conditions, medications, etc.)"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700 mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-neutral-900 dark:text-neutral-100",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-amber-500"}),(0,a.jsx)("span",{children:"Emergency Contact"})]}),(0,a.jsx)("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3 mb-4",children:(0,a.jsx)("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"⚠️ Emergency contact phone number must be different from your registered phone number."})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300",children:"Contact Name"}),(0,a.jsx)("input",{...Y("emergencyContactName",{required:"Emergency contact name is required"}),disabled:!j,className:"w-full px-4 py-3 rounded-lg border bg-white dark:bg-neutral-800 \n                    text-neutral-900 dark:text-neutral-100\n                    ".concat(j?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed","\n                    ").concat(J.emergencyContactName?"border-red-500":"border-neutral-300 dark:border-neutral-600","\n                    focus:outline-none focus:ring-2 focus:ring-primary-500"),placeholder:"e.g., John Doe"}),J.emergencyContactName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:J.emergencyContactName.message})]}),(0,a.jsx)("div",{children:(0,a.jsx)(v.Z,{label:"Emergency Phone Number",countryCode:k,onCountryCodeChange:e=>{w(e),et(D,e)},onPhoneChange:e=>{C(e),W("emergencyContactPhone",e),et(e,k)},value:D,error:L,disabled:!j})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300",children:"Relationship"}),(0,a.jsx)("select",{value:_,onChange:e=>{U(e.target.value),"other"!==e.target.value&&X("")},disabled:!j,className:"w-full px-4 py-3 rounded-lg border bg-white dark:bg-neutral-800 \n                    text-neutral-900 dark:text-neutral-100\n                    ".concat(j?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed","\n                    border-neutral-300 dark:border-neutral-600\n                    focus:outline-none focus:ring-2 focus:ring-primary-500"),children:R.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"other"===_&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300",children:"Specify Relationship"}),(0,a.jsx)("input",{type:"text",value:V,onChange:e=>X(e.target.value),disabled:!j,className:"w-full px-4 py-3 rounded-lg border bg-white dark:bg-neutral-800 \n                      text-neutral-900 dark:text-neutral-100\n                      ".concat(j?"":"bg-neutral-100 dark:bg-neutral-700 cursor-not-allowed","\n                      border-neutral-300 dark:border-neutral-600\n                      focus:outline-none focus:ring-2 focus:ring-primary-500"),placeholder:"e.g., Neighbor, Caregiver, Friend's relative"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-500",children:"Enter the relationship if the person is not a family member"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-6 border border-neutral-200 dark:border-neutral-700 mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-neutral-900 dark:text-neutral-100",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-sky-500"}),(0,a.jsx)("span",{children:"My Documents"})]}),(0,a.jsx)(A,{documents:S,onUpload:e=>{let t={...e,id:"doc-".concat(Date.now()),uploadedAt:new Date().toISOString()};B(e=>[...e,t])},onRemove:e=>{B(t=>t.filter(t=>t.id!==e))},label:"Upload Medical Documents",hint:"Upload medical reports, prescriptions, ID proofs, or insurance documents"})]}),j&&(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsxs)("button",{type:"submit",className:"flex items-center gap-2 px-6 py-3 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition-colors",children:[(0,a.jsx)(g,{className:"w-4 h-4"}),"Save Changes"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{if(N(!1),t){let e=(null==t?void 0:t.emergencyContact)||{};K({name:(null==t?void 0:t.name)||"",dateOfBirth:(null==t?void 0:t.dateOfBirth)||"",bloodGroup:(null==t?void 0:t.bloodGroup)||"",gender:(null==t?void 0:t.gender)||"male",allergies:(null==t?void 0:t.allergies)||"",medicalHistory:(null==t?void 0:t.medicalHistory)||"",emergencyContactName:(null==e?void 0:e.name)||"",emergencyContactPhone:(null==e?void 0:e.phone)||"",emergencyContactRelation:(null==e?void 0:e.relation)||""}),(null==t?void 0:t.documents)&&B(t.documents),(null==e?void 0:e.relation)?R.some(t=>t.value===e.relation.toLowerCase())?(U(e.relation.toLowerCase()),X("")):(U("other"),X(e.relation)):(U(""),X(""))}Z(void 0),G(void 0)},className:"flex items-center gap-2 px-6 py-3 border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300 rounded-lg font-medium hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Cancel"]})]})]}),(null==t?void 0:t.id)&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(q,{parentUserId:t.id})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-slate-900 py-8 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Loading profile..."})]})})}},3960:function(e,t,r){"use strict";var a=r(7821),l=r(8078),n=r(4713),s=r(20),o=r(7432);let i=(0,l.forwardRef)((e,t)=>{let{label:r,value:i="",error:d,countryCode:c,onCountryCodeChange:u,onPhoneChange:m,disabled:x}=e,[h,g]=(0,l.useState)(!1),[b,p]=(0,l.useState)(i),[f,y]=(0,l.useState)(),v=o.Qd.find(e=>e.code===c)||o.Qd[0];(0,l.useEffect)(()=>{p(i)},[i]);let j=e=>{u(e.code),g(!1),b.length>0&&y((0,o.BO)(b,e.code).error)},N=d||f;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:r}),(0,a.jsxs)("div",{className:"relative flex",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>!x&&g(!h),disabled:x,className:"flex items-center gap-1 px-3 py-3 rounded-l-lg border bg-gray-50 dark:bg-neutral-700 \n                text-sm font-medium min-w-[90px] justify-between\n                ".concat(x?"opacity-50 cursor-not-allowed":"hover:bg-gray-100 dark:hover:bg-neutral-600","\n                ").concat(N?"border-red-500 dark:border-red-600":"border-gray-300 dark:border-neutral-600 border-r-0"),children:[(0,a.jsx)("span",{className:"text-lg mr-1",children:v.flag}),(0,a.jsx)("span",{className:"text-neutral-700 dark:text-neutral-200",children:v.code}),(0,a.jsx)(n.Z,{className:"w-4 h-4 text-gray-500"})]}),h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),(0,a.jsx)("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white dark:bg-neutral-800 border border-gray-200    dark:border-neutral-600 rounded-lg shadow-lg z-20 max-h-60 overflow-y-auto",children:o.Qd.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>j(e),className:"w-full flex items-center gap-3 px-3 py-2.5 text-left hover:bg-gray-100 \n                        dark:hover:bg-neutral-700 text-sm transition-colors\n                        ".concat(e.code===c?"bg-primary-50 dark:bg-primary-900/30":""),children:[(0,a.jsx)("span",{className:"text-lg",children:e.flag}),(0,a.jsx)("span",{className:"flex-1 text-neutral-900 dark:text-neutral-100",children:e.country}),(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:e.code})]},e.code))})]})]}),(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(s.Z,{className:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{ref:t,type:"tel",value:b,onChange:e=>{let t=e.target.value.replace(/\D/g,"");p(t),m(t),t.length>0?y((0,o.BO)(t,c).error):y(void 0)},disabled:x,placeholder:"".concat(v.minLength," digits"),maxLength:v.maxLength+5,className:"w-full rounded-r-lg border bg-white dark:bg-neutral-800 py-3 pl-10 pr-4 text-sm\n                text-neutral-900 dark:text-neutral-100\n                focus:outline-none focus:ring-2 transition-all\n                ".concat(x?"opacity-50 cursor-not-allowed bg-gray-100":"","\n                ").concat(N?"border-red-500 focus:ring-red-400 dark:border-red-600":"border-gray-300 dark:border-neutral-600 focus:ring-primary-500 focus:border-transparent")})]})]}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Phone number should be ",v.minLength===v.maxLength?"".concat(v.minLength," digits"):"".concat(v.minLength,"-").concat(v.maxLength," digits")," for ",v.country]}),N&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-500",children:N})]})});i.displayName="PhoneInput",t.Z=i},6352:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var a=r(3020),l=r(4302);let n=(0,a.Ue)()((0,l.tJ)((e,t)=>({user:null,token:null,isAuthenticated:!1,isHydrated:!1,login:(t,r)=>{e({user:t,token:r,isAuthenticated:!0})},logout:()=>{e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null})),setHydrated:()=>e({isHydrated:!0})}),{name:"sangman-auth",storage:(0,l.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e&&e.setHydrated()}}))},7432:function(e,t,r){"use strict";r.d(t,{BO:function(){return l},BP:function(){return o},Qc:function(){return n},Qd:function(){return a},f0:function(){return i},xF:function(){return s}});let a=[{code:"+91",country:"India",minLength:10,maxLength:10,flag:"\uD83C\uDDEE\uD83C\uDDF3"},{code:"+1",country:"USA/Canada",minLength:10,maxLength:10,flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"+44",country:"UK",minLength:10,maxLength:10,flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"+971",country:"UAE",minLength:9,maxLength:9,flag:"\uD83C\uDDE6\uD83C\uDDEA"},{code:"+966",country:"Saudi Arabia",minLength:9,maxLength:9,flag:"\uD83C\uDDF8\uD83C\uDDE6"},{code:"+65",country:"Singapore",minLength:8,maxLength:8,flag:"\uD83C\uDDF8\uD83C\uDDEC"},{code:"+61",country:"Australia",minLength:9,maxLength:9,flag:"\uD83C\uDDE6\uD83C\uDDFA"},{code:"+49",country:"Germany",minLength:10,maxLength:11,flag:"\uD83C\uDDE9\uD83C\uDDEA"},{code:"+33",country:"France",minLength:9,maxLength:9,flag:"\uD83C\uDDEB\uD83C\uDDF7"},{code:"+81",country:"Japan",minLength:10,maxLength:10,flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"+86",country:"China",minLength:11,maxLength:11,flag:"\uD83C\uDDE8\uD83C\uDDF3"},{code:"+977",country:"Nepal",minLength:10,maxLength:10,flag:"\uD83C\uDDF3\uD83C\uDDF5"},{code:"+880",country:"Bangladesh",minLength:10,maxLength:10,flag:"\uD83C\uDDE7\uD83C\uDDE9"},{code:"+92",country:"Pakistan",minLength:10,maxLength:10,flag:"\uD83C\uDDF5\uD83C\uDDF0"},{code:"+94",country:"Sri Lanka",minLength:9,maxLength:9,flag:"\uD83C\uDDF1\uD83C\uDDF0"}];function l(e,t){let r=a.find(e=>e.code===t);if(!r)return{valid:!1,error:"Invalid country code"};let l=e.replace(/\D/g,"");return l.length<r.minLength?{valid:!1,error:"Phone number must be at least ".concat(r.minLength," digits for ").concat(r.country)}:l.length>r.maxLength?{valid:!1,error:"Phone number must be at most ".concat(r.maxLength," digits for ").concat(r.country)}:/^\d+$/.test(l)?{valid:!0}:{valid:!1,error:"Phone number should only contain digits"}}function n(e){let t={minLength:e.length>=8,hasUppercase:/[A-Z]/.test(e),hasLowercase:/[a-z]/.test(e),hasNumber:/[0-9]/.test(e),hasSpecialChar:/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)},r=[];t.minLength||r.push("Password must be at least 8 characters"),t.hasUppercase||r.push("Password must contain at least one uppercase letter"),t.hasLowercase||r.push("Password must contain at least one lowercase letter"),t.hasNumber||r.push("Password must contain at least one number"),t.hasSpecialChar||r.push("Password must contain at least one special character (!@#$%^&*)");let a=Object.values(t).filter(Boolean).length;return{isValid:5===a,score:a,errors:r,requirements:t}}function s(e){switch(e){case 0:case 1:default:return{label:"Very Weak",color:"red"};case 2:return{label:"Weak",color:"orange"};case 3:return{label:"Fair",color:"yellow"};case 4:return{label:"Good",color:"lime"};case 5:return{label:"Strong",color:"green"}}}function o(e,t){return e.replace(/\D/g,"")===t.replace(/\D/g,"")?{valid:!1,error:"Emergency contact phone must be different from your phone number"}:{valid:!0}}function i(e,t){let r=e.replace(/\D/g,"");return"".concat(t).concat(r)}}},function(e){e.O(0,[9463,6028,7949,7115,2364,1744],function(){return e(e.s=2405)}),_N_E=e.O()}]);